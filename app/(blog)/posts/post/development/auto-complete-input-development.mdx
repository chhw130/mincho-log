---
title: ìë™ì™„ì„± input ì»´í¬ë„ŒíŠ¸ ê°œë°œê¸°
date: 2025-07-17
description: ì¬ì‚¬ìš© ê°€ëŠ¥í•œ ìë™ì™„ì„± input ì»´í¬ë„ŒíŠ¸ë¥¼ ê°œë°œí•˜ë©° ê²ªì€ ê¸°ìˆ ì  ë„ì „ê³¼ í•´ê²° ê³¼ì •ì„ ê³µìœ 
category: Development
thumbnail: /images/post/development/auto-complete-input-development/thumbnail.png
---

ì´ì „ì— í”„ë¡ íŠ¸ì—”ë“œ ê¸°ëŠ¥ ê°œë°œ ì¤‘ ë‹¤ìŒê³¼ ê°™ì€ ê¸°ëŠ¥ ìš”êµ¬ì‚¬í•­ì„ ë°›ì•˜ì–´ìš”.
"`postman`ì²˜ëŸ¼ íŠ¹ì • ë¬¸ìë¥¼ ì‚½ì…í•˜ë©´ ìë™ì™„ì„± ì¶”ì²œ overlayê°€ ë‚˜ì˜¤ëŠ” ê¸°ëŠ¥ì„ ì¶”ê°€í•´ì£¼ì„¸ìš”."

ë‹¹ì‹œ ê¸‰í•˜ê²Œ ê°œë°œí•œ ê±´ë“¤ì´ ë§ì•„ ë‹¨ìˆœíˆ ê¸°ëŠ¥ì´ ë™ì‘í•˜ëŠ” ì»´í¬ë„ŒíŠ¸ë¥¼ ë§Œë“¤ì—ˆì–´ìš”. ê·¸ëŸ¬ë‹¤ ë³´ë‹ˆ íŠ¹ì • ë„ë©”ì¸ì—ë§Œ ì¬ì‚¬ìš© ê°€ëŠ¥í•œ ì»´í¬ë„ŒíŠ¸ê°€ ë˜ì—ˆì–´ìš”. ì´ë¥¼ ë³´ì™„í•˜ê¸° ìœ„í•´ ì²˜ìŒë¶€í„° ë‹¤ì‹œ ìš”êµ¬ì‚¬í•­ì„ ì •ë¦¬í•˜ì—¬ ì„¤ê³„í•˜ê³ , ì‚¬ìš©ì í¸ì˜ì„±ì„ ìœ„í•œ ê¸°ëŠ¥ì„ ì¶”ê°€í•˜ê¸°ë¡œ í–ˆì–´ìš”.

# ê¸°ëŠ¥ ìš”êµ¬ ì‚¬í•­

<Image src="/images/post/development/auto-complete-input-development/requirement1.gif"
  objectFit="contain"
  fill
  height="400px"
/>

<Image src="/images/post/development/auto-complete-input-development/requirement2.gif"
  objectFit="contain"
  fill
  height="400px"
/>

êµ¬í˜„í•  ìš”êµ¬ ì‚¬í•­ì€ postmanê³¼ ê°™ì€ ë³€ìˆ˜ ìë™ ì™„ì„± ê¸°ëŠ¥ì´ì—ˆì–´ìš”. ê¸°ëŠ¥ ê°œë°œì„ í•˜ê¸° ì „ì— ì–´ë–¤ ê¸°ëŠ¥ì´ í•„ìš”í•œì§€ ë¦¬ìŠ¤íŠ¸ë¥¼ ì •ë¦¬í–ˆì–´ìš”.

1. `{` í…ìŠ¤íŠ¸ê°€ ê°ì§€ë˜ë©´ popoverê°€ ì—´ë¦½ë‹ˆë‹¤.
2. `{` í…ìŠ¤íŠ¸ ë‹¤ìŒì— ì…ë ¥í•œ í‚¤ì›Œë“œì— ë”°ë¼ popover ì˜µì…˜ì´ ë‹¬ë¼ì§‘ë‹ˆë‹¤. (í‚¤ì›Œë“œì— í•´ë‹¹í•˜ëŠ” ì˜µì…˜ì´ ì—†ì„ ê²½ìš° popoverë¥¼ ë‹«ìŠµë‹ˆë‹¤.)
3. ì„ íƒí•œ í‚¤ì›Œë“œ ì˜µì…˜ì€ ê·¸ëŒ€ë¡œ inputì— ì…ë ¥ë©ë‹ˆë‹¤.
    - í•´ë‹¹ ì˜µì…˜ì˜ í…ìŠ¤íŠ¸ëŠ” `{{ë³€ìˆ˜ëª…}}` í˜•íƒœë¡œ ì…ë ¥ë©ë‹ˆë‹¤.
    - ê²€ìƒ‰ í‚¤ì›Œë“œì™€ ë™ì¼í•œ ë¶€ë¶„ì€ ì œê±°ë˜ê³  ê¸°ì¡´ì— ì…ë ¥ëœ textëŠ” ê·¸ëŒ€ë¡œ ìœ ì§€ë©ë‹ˆë‹¤.
    - `{` í…ìŠ¤íŠ¸ê°€ ì—°ì†ì ìœ¼ë¡œ ë“¤ì–´ì˜¨ ê²½ìš°ëŠ” `{` í•˜ë‚˜ë¡œ ëŒ€ì²´ë©ë‹ˆë‹¤. (ex : `{{{{{` â†’ `{`)

> ìš”êµ¬ì‚¬í•­ì„ ê¸€ë¡œë§Œ ë´¤ì„ ë•ŒëŠ” ê°ì´ ì˜¤ì§€ ì•Šì„ ìˆ˜ ìˆì–´ìš”. ì•„ë˜ì—ì„œ ê¸°ëŠ¥ í•˜ë‚˜í•˜ë‚˜ ì´í•´í•  ìˆ˜ ìˆë„ë¡ ë”°ë¼ê°€ë³´ê² ì–´ìš”.

# ê¸°ëŠ¥ êµ¬í˜„ì˜ ì—¬ì •

**ì°¸ê³  ì‚¬í•­ ë° í˜„í™©**
- Vueë¥¼ ì‚¬ìš©í•˜ê³  ìˆì–´ìš”.
- í˜„ì¬ Ant Designì„ í†µí•´ ë§ˆí¬ì—…ì„ ì§„í–‰í•˜ê³  ìˆì–´ìš”.
- ìŠ¤íƒ€ì¼ë§ì€ í¼ë¸”ë¦¬ì…”ë¶„ë“¤ì´ ì‘ì—…í•´ì£¼ì‹œê³  ìˆì–´ìš”.

## cursor positionìœ¼ë¡œ íŠ¹ì • ë¬¸ìì—´(`{`) ìœ„ì¹˜ ê¸°ì–µí•˜ê¸°

**ê¸°ëŠ¥ ìš”êµ¬ ì‚¬í•­**
1. `{` í…ìŠ¤íŠ¸ê°€ ì…ë ¥ë˜ë©´ popoverê°€ ì—´ë¦½ë‹ˆë‹¤.
2. `{` í…ìŠ¤íŠ¸ ë‹¤ìŒì— ì…ë ¥í•œ í‚¤ì›Œë“œì— ë”°ë¼ popover ì˜µì…˜ì´ ë‹¬ë¼ì§‘ë‹ˆë‹¤. (í‚¤ì›Œë“œì— í•´ë‹¹í•˜ëŠ” ì˜µì…˜ì´ ì—†ì„ ê²½ìš° popoverë¥¼ ë‹«ìŠµë‹ˆë‹¤.)


popoverê°€ ì—´ë¦¬ëŠ” ìƒí™©ì€ cursorì˜ ìœ„ì¹˜ê°€ `{` + `ê²€ìƒ‰ëœ í‚¤ì›Œë“œ`ê°€ ì¡´ì¬í•  ë•Œì˜ˆìš”. ê·¸ë˜ì„œ ì…ë ¥ëœ textì—ì„œ `{` + `ê²€ìƒ‰ëœ í‚¤ì›Œë“œ` ê°’ì„ êµ¬ë¶„í•´ì¤˜ì•¼ í•´ìš”. `handleVariableInput` ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ í•¨ìˆ˜ë¥¼ ë§Œë“¤ì–´ êµ¬ë¶„í•´ì£¼ëŠ” ë¡œì§ì„ êµ¬ì„±í–ˆì–´ìš”.

```typescript
// ê²€ìƒ‰ í‚¤ì›Œë“œ ref
const keyword = ref("");

// ì»¤ì„œ ìœ„ì¹˜
const variableStartPosition = ref(0);

// input ë‚´ë¶€ì— ë³€ìˆ˜ ì…ë ¥ í™•ì¸ ì²˜ë¦¬
const handleVariableInput = (event: InputEvent | KeyboardEvent) => {
  const target = event.target as HTMLInputElement;
  const inputValue = target.value;

  // ë³€ìˆ˜ê°€ ì‚¬ìš©ëœ ìœ„ì¹˜ ì°¾ê¸°
  const newCursorPosition = target.selectionStart as number;

  if (inputValue[newCursorPosition - 1] === '{') {
    variableStartPosition.value = newCursorPosition;
  }

  // ....í›„ëµ
};
```

[selectionStart](https://developer.mozilla.org/en-US/docs/Web/API/HTMLInputElement/selectionStart)ëŠ” í•´ë‹¹ input ìš”ì†Œì˜ ì»¤ì„œ ì‹œì‘ì  index ê°’ì„ ë‚˜íƒ€ë‚´ìš”. inputì—ì„œ í˜„ì¬ ìœ„ì¹˜ì˜ cursor ì¸ë±ìŠ¤ë¥¼ ê¸°ì–µí•˜ë‹¤ê°€ íŠ¹ì • ë¬¸ìì—´ì´ ë‚˜ì˜¤ëŠ” ìœ„ì¹˜ë¥¼ `variableStartPosition`ìœ¼ë¡œ ì €ì¥í•´ìš”.

```typescript
const handleVariableInput = (event: InputEvent | KeyboardEvent) => {
  // ... ìƒëµ
  const currentText = inputValue.slice(0, newCursorPosition);

  // '{'ë¡œ ì—´ë¦° êµ¬ê°„ì´ ìˆëŠ”ì§€ í™•ì¸
  const isVariableMatch = currentText.match(/{+([^{}]*)$/);

  const searchKeyword = inputValue.slice(
    variableStartPosition.value,
    newCursorPosition
  );

  keyword.value = searchKeyword;

  // '{'ë¡œ ì—´ë¦° êµ¬ê°„ì´ ì—†ê±°ë‚˜ ê²€ìƒ‰ ê²°ê³¼ê°€ ì—†ìœ¼ë©´ ë“œë¡­ë‹¤ìš´ ë‹«ê¸°
  if (!isVariableMatch || !searchVariables.value.length) {
    onCloseHandler();
    return;
  }

  // ë³€ìˆ˜ê°€ ì‚¬ìš©ëœ ê²½ìš° ë“œë¡­ë‹¤ìš´ ì—´ê¸°
  onOpenHandler();
  initializeIndex();
};

// input ë‚´ë¶€ ì´ë²¤íŠ¸(keyup)
const onKeyupInput = (event: KeyboardEvent) => {
  if (event.key === "ArrowRight" || event.key === "ArrowLeft") {
    handleVariableInput(event);
  }
};
```

`{`ê°€ ì…ë ¥ëœ í›„ì˜ í‚¤ì›Œë“œ ê°’ì„ ì¶”ì¶œí•´ì•¼ í•´ìš”. 
í‚¤ì›Œë“œ ê°’ì„ ì¶”ì¶œí•˜ê¸° ìœ„í•´ ì²˜ìŒì—ëŠ” `lastIndexOf`ë¡œ `{`ë¡œ ì—´ë¦° ë¶€ë¶„ì„ íŒŒì•…í–ˆì–´ìš”. í•˜ì§€ë§Œ `}` ë‹«íŒ ë¶€ë¶„ì˜ ë³€ìˆ˜ê¹Œì§€ íŒŒì•…ë˜ì–´ ì •ê·œí‘œí˜„ì‹ìœ¼ë¡œ íŒë‹¨í•˜ê¸°ë¡œ í–ˆì–´ìš”.

ì¤‘ê´„í˜¸ê°€ ì—´ë¦° ë¶€ë¶„ì´ ì—†ê±°ë‚˜ ê²€ìƒ‰ í‚¤ì›Œë“œ ê°’ì´ ì¡´ì¬í•˜ì§€ ì•ŠëŠ”ë‹¤ë©´ popoverë¥¼ ë‹«ì•„ìš”. ê·¸ë ‡ì§€ ì•Šë‹¤ë©´ popoverë¥¼ ì—´ì–´ì¤˜ìš”. ì´ë ‡ê²Œ ë§Œë“¤ì–´ì§„ í•¨ìˆ˜ë¥¼ ì´ì œ ì´ë²¤íŠ¸ì— ë“±ë¡í•´ì¤˜ì•¼ í•´ìš”. 
ì´ ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ëŠ” ë‹¤ìŒ ì´ë²¤íŠ¸ì™€ ë°”ì¸ë”© ì‹œì¼œì¤˜ì•¼í•´ìš”.
- input ë° click ì´ë²¤íŠ¸
- keyup ì´ë²¤íŠ¸('ArrowRight', 'ArrowLeft')

```html
<a-input
  @input="handleVariableInput"
  @click="handleVariableInput"
  @keyup="onKeyupInput"
/>
```

<Callout status='warning'>
keyDown ì´ë²¤íŠ¸ì™€ ì—°ê²°ë˜ë©´ input index ê°’ì´ ì´ì „ ê°’ì„ ì°¸ì¡°í•˜ì—¬ ê³„ì‚°í•´ì„œ íƒ€ì´ë°ì´ ë§ì§€ ì•Šì„ ìˆ˜ ìˆì–´ìš”.
</Callout>

ì´ë¥¼ mermaidë¡œ íë¦„ì„ ë„“ê²Œ ê·¸ë ¤ë³´ë©´ ë‹¤ìŒê³¼ ê°™ì•„ìš”.

<Image src="/images/post/development/auto-complete-input-development/requirement-mermaid1.png"
  objectFit="contain"
  fill
  height="800px"
/>


## í‚¤ì›Œë“œ ì˜µì…˜ ì„ íƒ ê¸°ëŠ¥

**ê¸°ëŠ¥ ìš”êµ¬ ì‚¬í•­**
1. ì„ íƒí•œ í‚¤ì›Œë“œ ì˜µì…˜ì€ ê·¸ëŒ€ë¡œ inputì— ì…ë ¥ë©ë‹ˆë‹¤.
    1. í•´ë‹¹ ì˜µì…˜ì˜ í…ìŠ¤íŠ¸ëŠ” `{{ë³€ìˆ˜ëª…}}` í˜•íƒœë¡œ ì…ë ¥ë©ë‹ˆë‹¤.
    2. ê²€ìƒ‰ í‚¤ì›Œë“œì™€ ë™ì¼í•œ ë¶€ë¶„ì€ ì œê±°ë˜ê³  ê¸°ì¡´ì— ì…ë ¥ëœ textëŠ” ê·¸ëŒ€ë¡œ ìœ ì§€ë©ë‹ˆë‹¤.
    3. `{` í…ìŠ¤íŠ¸ê°€ ì—°ì†ì ìœ¼ë¡œ ë“¤ì–´ì˜¨ ê²½ìš°ëŠ” `{` í•˜ë‚˜ë¡œ ëŒ€ì²´ë©ë‹ˆë‹¤. (ex : `{{{{{` â†’ `{`)


```html
<a-dropdown v-model:open="isOpen" :trigger="['contextmenu']">
  <a-input
    ref="inputRef"
    @input="onInputEvent"
    @click="onClickInput"
    @keyup="onKeyupInput"
  />
  <template #overlay>
    <div class="vista-msg" style="display: flex">
      <a-menu class="vista-msg-left">
        <template
          v-for="(variable, index) of searchVariables"
          :key="variable"
        >
          <a-menu-item>
            <div ref="itemRefs">
              <slot name="variable-item" :variable="variable">
                {{ variable[variableKey] as string }}
              </slot>
            </div>
          </a-menu-item>
        </template>
      </a-menu>
      <slot name="right-menu"/>
    </div>
  </template>
</a-dropdown>
```

overlay ë‚´ë¶€ í…œí”Œë¦¿ì—ì„œ ë³€ìˆ˜ ëª©ë¡ì„ ë³´ì—¬ì£¼ê³  ìˆì–´ìš”. `a-menu-item`ì—ì„œëŠ” ê°ê°ì˜ ì˜µì…˜ì„ ë³´ì—¬ì£¼ê³ , `right-menu` ìŠ¬ë¡¯ì—ëŠ” í•´ë‹¹ ì˜µì…˜ì„ hoverí–ˆì„ ë•Œ ìƒì„¸ ì •ë³´ë¥¼ ë³´ì—¬ì¤˜ì•¼ í•´ìš”.

ì²« ë²ˆì§¸ë¡œ í•´ë‹¹ ë©”ë‰´ ì˜µì…˜ì„ í´ë¦­í•˜ë©´, ê·¸ëŒ€ë¡œ inputì— ì…ë ¥ë˜ëŠ” ì´ë²¤íŠ¸ ë™ì‘ì„ ë§Œë“¤ì–´ ë³¼ê²Œìš”.

```typescript
// ë³€ìˆ˜ ì„ íƒ ì‹œ ì²˜ë¦¬í•˜ëŠ” í•¨ìˆ˜
const handleSelectMenu = (variable: T) => {
  const inputValue = props.inputValue;
  const cursorPos = variableStartPosition.value;

  // ë³€ìˆ˜ ì‹œì‘ ìœ„ì¹˜ ì°¾ê¸°
  let startPos = cursorPos;
  while (startPos > 0 && inputValue[startPos - 1] === '{') {
    startPos--;
  }
};
```

ìœ„ì—ì„œ ë§Œë“  `handleVariableInput` í•¨ìˆ˜ë¥¼ í†µí•´ í˜„ì¬ variable ì‹œì‘ ìœ„ì¹˜ë¥¼ ì•Œê³  ìˆì–´ìš”. ì´ê²ƒìœ¼ë¡œ ê°„ë‹¨í•˜ê²Œ ë³€ìˆ˜ ì‹œì‘ ìœ„ì¹˜ë¥¼ ì•Œ ìˆ˜ëŠ” ìˆì§€ë§Œ, ì—°ì†ì ìœ¼ë¡œ ë“¤ì–´ì˜¨ `{` í…ìŠ¤íŠ¸ë¥¼ ì˜ˆì™¸ ì²˜ë¦¬í•´ì¤˜ì•¼ í•´ìš”.

ê·¸ë˜ì„œ `variableStartPosition`ì„ ê¸°ì¤€ìœ¼ë¡œ ì´ì „ ì¸ë±ìŠ¤ì˜ í…ìŠ¤íŠ¸ê°€ `{`ë¥¼ ë°˜ë³µí•  ë•Œë§ˆë‹¤ indexë¥¼ í•˜ë‚˜ì”© ë¹¼ì¤¬ì–´ìš”.

```typescript
const handleSelectMenu = (variable: T) => {
  //...ìƒëµ
  const prefix = inputValue.slice(0, startPos);
  const afterCursor = inputValue.slice(cursorPos);
  let suffix = afterCursor;

  // í˜„ì¬ í‚¤ì›Œë“œ ì œê±°
  suffix = suffix.replace(keyword.value, "");

  // ìƒˆë¡œìš´ ì…ë ¥ í…œí”Œë¦¿ ìƒì„±
  const variableText = variable[props.variableKey] as string;
  const newInputTemplate = `${prefix}${variableText}${suffix}`;

  //emitì„ í†µí•´ ìƒìœ„ ì»´í¬ë„ŒíŠ¸ë¡œ ìƒˆë¡œìš´ í…œí”Œë¦¿ ì „ì†¡
  emit("update:modelValue", newInputTemplate);
  onCloseHandler();
}
```

ë‹¤ìŒê³¼ ê°™ì´ ì…ë ¥ëœ ë¶€ë¶„ì„ `ì»¤ì„œ ì´ì „` + `{{ë³€ìˆ˜ëª…}}` + `ì»¤ì„œ ì´í›„`ë¡œ í…œí”Œë¦¿ì„ ë§Œë“¤ì–´ì¤¬ì–´ìš”.

ê·¸ëŸ°ë°, ê°’ì€ ì˜ ë§Œë“¤ì–´ì§€ì§€ë§Œ cursorì˜ ìœ„ì¹˜ê°€ ë§¨ ë’¤ë¡œ ì´ë™í–ˆì–´ìš”. ìì—°ìŠ¤ëŸ¬ìš´ íë¦„ì´ë¼ë©´ `{{ë³€ìˆ˜ëª…}}`ê³¼ `suffix` ì‚¬ì´ì— cursorë¥¼ ìœ„ì¹˜ì‹œí‚¤ëŠ” ê²Œ ì¢‹ì•„ ë³´ì—¬ìš”.

```typescript
const handleSelectMenu = (variable: T) => {
  //...ìƒëµ
  const prefix = inputValue.slice(0, startPos);
  const afterCursor = inputValue.slice(cursorPos);
  let suffix = afterCursor;

  // í˜„ì¬ í‚¤ì›Œë“œ ì œê±°
  suffix = suffix.replace(keyword.value, "");

  // ìƒˆë¡œìš´ ì…ë ¥ í…œí”Œë¦¿ ìƒì„±
  const variableText = variable[props.variableKey] as string;
  const newInputTemplate = `${prefix}${variableText}${suffix}`;

  //emitì„ í†µí•´ ìƒìœ„ ì»´í¬ë„ŒíŠ¸ë¡œ ìƒˆë¡œìš´ í…œí”Œë¦¿ ì „ì†¡
  emit("update:modelValue", newInputTemplate);
  onCloseHandler();

  //ì»¤ì„œìœ„ì¹˜ ê°±ì‹ !!
  const newCursorPosition = prefix.length + variableText.length;
  inputRef.value?.setSelectionRange(newCursorPosition, newCursorPosition);
}
```

`setSelectionRange`ë¥¼ í†µí•´ í•´ë‹¹ ì»¤ì„œ ìœ„ì¹˜ë¥¼ ì¡°ì •í•´ì¤¬ì–´ìš”. ê·¸ëŸ°ë° ì—¬ì „íˆ ë™ì‘í•˜ì§€ ì•Šì•˜ì–´ìš”.

ì´ìœ ëŠ” Vueì˜ ë°˜ì‘ì„± ì‹œìŠ¤í…œê³¼ DOM ì—…ë°ì´íŠ¸ íƒ€ì´ë°ì´ ë¹„ë™ê¸°ì ìœ¼ë¡œ ì´ë¤„ì§€ê³  ìˆê¸° ë•Œë¬¸ì´ì—ìš”.

```typescript
emit("update:modelValue", newInputTemplate);
onCloseHandler();

  const newCursorPosition = prefix.length + variableText.length;
  inputRef.value?.setSelectionRange(newCursorPosition, newCursorPosition);
```

emitì„ í†µí•´ ê°’ì„ ì „ë‹¬í•˜ê³  ì´í›„ì— ì´ ê°’ì„ í† ëŒ€ë¡œ cursorì˜ ìœ„ì¹˜ë¥¼ ê³„ì‚°í•´ì•¼ í•´ìš”. í•˜ì§€ë§Œ ë¹„ë™ê¸°ì ìœ¼ë¡œ ì—…ë°ì´íŠ¸ê°€ ë˜ê³  ìˆê¸° ë•Œë¬¸ì— `inputRef`ëŠ” ì´ì „ input valueë¥¼ ì°¸ì¡°í•˜ê³  ìˆì–´ìš”. ì¦‰, `setSelectionRange`ë¥¼ í˜¸ì¶œí•˜ê¸° ì „ì— DOM updateê°€ ì™„ë£Œëœ í›„ì— ë¡œì§ì„ ì‹¤í–‰í•´ì•¼ í•´ìš”.

```typescript
emit("update:modelValue", newInputTemplate);
onCloseHandler();


  await nextTick();
  const newCursorPosition = prefix.length + variableText.length;
  inputRef.value?.setSelectionRange(newCursorPosition, newCursorPosition);
```
DOMì„ ë™ê¸°ì ìœ¼ë¡œ ì—…ë°ì´íŠ¸í•˜ê¸° ìœ„í•´ `nextTick`ì„ í˜¸ì¶œí•´ì„œ ë§ˆë¬´ë¦¬í–ˆì–´ìš”.

<Image src="/images/post/development/auto-complete-input-development/requirement-mermaid2.png"
  objectFit="contain"
  fill
  height="620px"
/>

# ì‚¬ìš©ì„± ê°œì„ 

ë“œë””ì–´ ìš”êµ¬ì‚¬í•­ì„ ë‹¤ êµ¬í˜„í–ˆì–´ìš”. ê·¸ëŸ°ë° ì‚¬ìš©ì„± ë° ì ‘ê·¼ì„± ì¸¡ë©´ì—ì„œ ì•„ì‰¬ìš´ ë¶€ë¶„ì´ ìˆì—ˆì–´ìš”.

select boxì˜ ê²½ìš°, ë§ˆìš°ìŠ¤ë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šì•„ë„ í‚¤ë³´ë“œë¡œ ì¶©ë¶„íˆ ì¡°ì‘ì´ ê°€ëŠ¥í•´ìš”. í”„ë¡œì íŠ¸ íŠ¹ì„±ìƒ ì ‘ê·¼ì„±ê¹Œì§€ ê³ ë ¤í•˜ê³  ìˆì§€ëŠ” ì•Šì§€ë§Œ, ì¼ë°˜ ì‚¬ìš©ìì—ê²Œë„ ì¶©ë¶„íˆ ê³ ë ¤ë  ì‚¬í•­ì´ë¼ê³  íŒë‹¨í–ˆì–´ìš”.

## í‚¤ë³´ë“œ ì¡°ì‘ ê¸°ëŠ¥ ì¶”ê°€

```typescript
const handleScrollView = (event: KeyboardEvent) => {
  switch (event.key) {
    case "ArrowDown":
      event.preventDefault();
      // í•˜ìœ„ í•­ëª©ìœ¼ë¡œ ì´ë™ ë¡œì§
      break;

    case "ArrowUp":
      event.preventDefault();
      // ì´ì „ í•­ëª©ìœ¼ë¡œ ì´ë™ ë¡œì§
      break;

    case "Enter":
      event.preventDefault();
      // í•´ë‹¹ í•­ëª© ì„ íƒ ë¡œì§
      break;

    case "Escape":
      event.preventDefault();
      // íŒì˜¤ë²„ ë‹«ê¸° ë¡œì§
      break;
  }
};
```

ê° í‚¤ë³´ë“œì— ëŒ€í•œ ë™ì‘ì„ ì •ì˜í•´ì¤¬ì–´ìš”. ê·¸ë¦¬ê³  ë¡œì§ì„ ì„¤ì •í•˜ê¸° ì „ì— ê° í‚¤ë³´ë“œì˜ ê¸°ë³¸ ë™ì‘ì„ ë§‰ì•„ì¤¬ì–´ìš”.

<Callout>
`ArrowDown`ì˜ ê²½ìš° input ê¸°ë³¸ ë™ì‘ìœ¼ë¡œ ì»¤ì„œê°€ ë§¨ ë’¤ë¡œ ì´ë™í•©ë‹ˆë‹¤. 
`Enter`ì˜ ê²½ìš° form ì–‘ì‹ì—ì„œ button typeì´ submitì´ë¼ë©´ form ì œì¶œ ì´ë²¤íŠ¸ê°€ ë™ì‘í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
</Callout>

```html
<template #overlay>
  <div class="vista-msg" style="display: flex">
    <a-menu class="vista-msg-left">
      <template
        v-for="(variable, index) of searchVariables"
        :key="variable"
      >
        <a-menu-item
          :style="hoveredStyle(index)"
          @click="() => handleSelectMenu(variable)"
          @mouseover="() => onMouseOverMenu(index)"
        >
          <div ref="itemRefs">
            <slot name="variable-item" :variable="variable">
              {{ variable[variableKey] as string }}
            </slot>
          </div>
        </a-menu-item>
      </template>
    </a-menu>
    <slot name="right-menu" :hovered-variable="hoveredVariable" />
  </div>
</template>

<script setup lang="ts" generic="T extends Record<string, any>">
//...ìƒëµ

const currentIndex = ref(0);

const initializeIndex = () => {
  currentIndex.value = 0;
};

// menu option DOM ëª©ë¡
const itemRefs = ref<HTMLElement[]>([]);

const navigateNextIndex = () => {
  currentIndex.value = currentIndex.value + 1;
};

const navigatePreviousIndex = () => {
  currentIndex.value = currentIndex.value - 1;
};

const onMouseOverMenu = (index: number) => {
  currentIndex.value = index;
};

// ë©”ë‰´ ì„ íƒ ì‹œ ìŠ¤íƒ€ì¼ ì ìš©
const hoveredStyle = (index: number) => {
  if (index === currentIndex.value) {
    return {
      backgroundColor: "rgba(24, 144, 255, 0.1)",
    };
  }
  return {};
};

const handleScrollView = (event: KeyboardEvent) => {
  if (!itemRefs.value.length) return;

  switch (event.key) {
    case "ArrowDown":
      event.preventDefault();
      navigateNextIndex();
      break;

    case "ArrowUp":
      event.preventDefault();
      navigatePreviousIndex();
      break;

    case "Enter":
      event.preventDefault();
      handleSelectMenu(searchVariables.value[currentIndex.value]);
      break;

    case "Escape":
      event.preventDefault();
      onCloseHandler();
      break;
  }
};
</script>
```

ì „ì²´ì ì¸ íë¦„ ì½”ë“œë¥¼ ì‘ì„±í–ˆì–´ìš”. menu option ëª©ë¡ í•˜ë‚˜í•˜ë‚˜ì— indexë¥¼ ë¶€ì—¬í–ˆì–´ìš”. select boxì²˜ëŸ¼ ë™ì‘í•˜ê³  ìŠ¤íƒ€ì¼ë„ ì ìš©ë˜ì—ˆì–´ìš”. ë‹¤ë§Œ í•œ ê°€ì§€ ë¬¸ì œê°€ ìˆì—ˆì–´ìš”. ì˜µì…˜ì„ ì„ íƒí•  ë•Œ í˜„ì¬ ë·°í¬íŠ¸ì— ë³´ì´ë„ë¡ ìŠ¤í¬ë¡¤ì´ ë˜ì§€ ì•Šì•˜ì–´ìš”.

<Callout>
VueëŠ” Reactì™€ëŠ” ë‹¤ë¥´ê²Œ ë‹¤ì¤‘ DOM ìš”ì†Œì— ëŒ€í•œ ë°”ì¸ë”©(ë°°ì—´ í˜•íƒœ)ì„ ì§€ì›í•´ìš”.
</Callout>

## íŠ¹ì • ìš”ì†Œê°€ ë·°í¬íŠ¸ì— ë³´ì´ê²Œ ìŠ¤í¬ë¡¤í•˜ëŠ” ê¸°ëŠ¥ êµ¬í˜„í•˜ê¸°

### focus ì´ë²¤íŠ¸ë¡œ êµ¬í˜„í•˜ê¸°

```typescript
watch(currentIndex, (val) => {
  if (val >= 0) {
    const targetItem = itemRefs.value[val];
    targetItem?.focus();
  }
});
```

í˜„ì¬ ì˜µì…˜ ì¸ë±ìŠ¤ë¥¼ observingí•˜ê³  ì´ë¥¼ focusí•˜ë©´ í•´ë‹¹ ìš”ì†Œê°€ ìë™ì ìœ¼ë¡œ ë·°í¬íŠ¸ë¡œ ì´ë™í•´ìš”. í•˜ì§€ë§Œ tabIndexì˜ ê²½ìš° í° ê°œë… ë‹¨ìœ„ì—ì„œì˜ ì…ë ¥ í•„ë“œì— ë¶€ì—¬í•˜ëŠ” ê²Œ ë” ì•Œë§ì•„ìš”. ì¦‰, input ë‚´ë¶€ì— menuì˜ optionë§ˆë‹¤ tab-indexë¥¼ ë¶€ì—¬í•˜ëŠ” ê²ƒì€ ì˜¤íˆë ¤ ì ‘ê·¼ì„±ì´ ë–¨ì–´ì§€ëŠ” í˜•íƒœë¼ê³  ìƒê°í–ˆì–´ìš”.

### scrollIntoViewë¡œ êµ¬í˜„í•˜ê¸°

> scrollIntoView() ë©”ì„œë“œëŠ” scrollIntoView()ê°€ í˜¸ì¶œëœ ìš”ì†Œê°€ ì‚¬ìš©ìì—ê²Œ í‘œì‹œë˜ë„ë¡ ìš”ì†Œì˜ ìƒìœ„ ì»¨í…Œì´ë„ˆë¥¼ ìŠ¤í¬ë¡¤í•©ë‹ˆë‹¤.

```typescript
watch(currentIndex, (val) => {
  if (val >= 0) {
    const targetItem = itemRefs.value[val];
    targetItem?.scrollIntoView({ behavior: "smooth", block: "center" });
  }
}); 
```

í•´ë‹¹ ìŠ¤í¬ë¡¤ë˜ëŠ” ìš”ì†ŒëŠ” ê°€ìš´ë°ì— ìœ„ì¹˜í•˜ì—¬ ì‚¬ìš©ì ëˆˆì— ë„ë„ë¡ ì¡°ì •í•´ì¤¬ì–´ìš”. ì—¬ê¸°ê¹Œì§€ ìš”êµ¬ì‚¬í•­ + ì‚¬ìš©ì„± ê°œì„ ì˜ ì—¬ì •ì„ ì‚´í´ë´¤ì–´ìš”.

<Image src="/images/post/development/auto-complete-input-development/requirement-mermaid3.png"
  objectFit="contain"
  fill
  height="350px"
/>


# useScrollViewë¡œ ì¶”ìƒí™”í•˜ê¸°

selectê°€ ì•„ë‹Œ DOM ìš”ì†Œì— ìŠ¤í¬ë¡¤ ê¸°ëŠ¥ì„ ë¶€ì—¬í•˜ê¸° ìœ„í•´ `useScrollView`ë¡œ ì¶”ìƒí™”í–ˆì–´ìš”.

```typescript
/**
 * scrollIntoView ì»´í¬ì €ë¸”
 * @param options - scrollIntoView ì˜µì…˜
 * @returns itemRefs, currentIndex, initializeIndex, handleScrollView
 */
export const useScrollView = (
  options: ScrollIntoViewOptions = { behavior: "smooth", block: "center" }
) => {
  const itemRefs = ref<HTMLElement[]>([]);
  const currentIndex = ref(0);

  watch(currentIndex, (val) => {
    if (val >= 0) {
      const targetItem = itemRefs.value[val];
      targetItem?.scrollIntoView(options);
    }
  });

  const initializeIndex = () => {
    currentIndex.value = 0;
  };

  const navigateNextIndex = () => {
    if (currentIndex.value === itemRefs.value.length - 1) {
      initializeIndex();
      return;
    }

    currentIndex.value = currentIndex.value + 1;
  };

  const navigatePreviousIndex = () => {
    if (currentIndex.value <= 0) {
      currentIndex.value = itemRefs.value.length - 1;
      return;
    }

    currentIndex.value = currentIndex.value - 1;
  };

  const handleScrollView = (event: KeyboardEvent, callback: () => void) => {
    if (!itemRefs.value.length) return;

    switch (event.key) {
      case "ArrowDown":
        event.preventDefault();
        navigateNextIndex();
        break;

      case "ArrowUp":
        event.preventDefault();
        navigatePreviousIndex();
        break;

      case "Enter":
        event.preventDefault();
        callback();
        break;

      case "Escape":
        event.preventDefault();
        break;
    }
  };

  return {
    itemRefs,
    currentIndex,
    initializeIndex,
    handleScrollView,
  };
};
```
ì¶”ìƒí™”ë¥¼ ì§„í–‰í•˜ë©´ì„œ ì‚¬ìš©ì„±ì„ í•œ ë‹¨ê³„ ë” ê°œì„ í–ˆì–´ìš”.
í˜„ì¬ indexê°€ ì²«ë²ˆì§¸ìš”ì†Œì¸ë° ArrowUp ë²„íŠ¼ì„ í´ë¦­í•  ê²½ìš° ë§ˆì§€ë§‰ìš”ì†Œë¡œ ì´ë™í•˜ê³ , indexê°€ ë§ˆì§€ë§‰ìš”ì†Œì¸ë° ArrowDown ë²„íŠ¼ì„ í´ë¦­í•  ê²½ìš° ì²«ë²ˆì§¸ ìš”ì†Œë¡œ ì´ë™í•˜ë„ë¡ ê¸°ëŠ¥ì„ ì¶”ê°€í–ˆì–´ìš”.


# ì •ë¦¬í•˜ë©°

ì´ë²ˆ ìë™ì™„ì„± input ì»´í¬ë„ŒíŠ¸ ê°œë°œì„ í†µí•´ ì—¬ëŸ¬ ì¤‘ìš”í•œ ê°œë°œ ê²½í—˜ê³¼ ì§€ì‹ì„ ì–»ì„ ìˆ˜ ìˆì—ˆì–´ìš”.

**í•™ìŠµ í¬ì¸íŠ¸**

- **ë¹„ë™ê¸° ì²˜ë¦¬ì˜ ì¤‘ìš”ì„±**: Vueì™€ ê°™ì€ í”„ë ˆì„ì›Œí¬ì—ì„œ ë°˜ì‘í˜• ë°ì´í„° ì—…ë°ì´íŠ¸ì™€ ì‹¤ì œ DOM ë°˜ì˜ ì‚¬ì´ì˜ ë¹„ë™ê¸°ì  íŠ¹ì„±ì„ ì´í•´í•´ì•¼ í•´ìš”.
- **ì…ë ¥ ìš”ì†Œì˜ ë¯¸ë¬˜í•¨**: inputê³¼ ê°™ì€ ì…ë ¥ ìš”ì†Œì—ëŠ” íƒ€ì´í•‘ í•˜ë‚˜í•˜ë‚˜ì— ë”°ë¼ ë¯¸ë¬˜í•œ íƒ€ì´ë° ë³€í™”ë¡œ ì¸í•´ ì‚¬ìš©ì„±ì´ ë‹¬ë¼ì§€ë©° ê¸°ëŠ¥ ë¡œì§ë„ ë‹¬ë¼ì§ˆ ìˆ˜ ìˆì–´ì„œ ê°œë°œìë¼ë©´ ì´ ì ì„ ì•Œì•„ë‘ì–´ì•¼ í•  ê²ƒ ê°™ì•„ìš”.
- **ì‚¬ìš©ì ê²½í—˜ ê°œì„ **: ë‹¨ìˆœ ê¸°ëŠ¥ êµ¬í˜„ì„ ë„˜ì–´ í‚¤ë³´ë“œ ì¡°ì‘, ì ‘ê·¼ì„± ë“±ì„ ê³ ë ¤í•œ ì»´í¬ë„ŒíŠ¸ ì„¤ê³„ì˜ ì¤‘ìš”ì„±ì„ ê¹¨ë‹¬ì•˜ì–´ìš”.

í•˜ë‚˜ì˜ ë…ë¦½ì ì¸ ì»´í¬ë„ŒíŠ¸ë¥¼ ì„¤ê³„í•˜ê³  ë§Œë“¤ì—ˆì§€ë§Œ, ì´ˆê¸° ë‹¨ê³„ë¼ ì•„ì§ í™•ì¥ ë° ê°œì„  ì—¬ì§€ë„ ìˆì—ˆì–´ìš”.

**ê³ ë ¤í•´ë³¼ ê°œì„  ì‚¬í•­ë“¤**
- `{` ëŒ€ì‹  `[`ê°€ ì§„ì…ì ì¸ ê²½ìš°ì˜ í™•ì¥ì„± ê³ ë ¤
- ê´€ë ¨ ê²€ìƒ‰ì–´ê°€ ë§ì§€ëŠ” ì•Šì§€ë§Œ, keyword ì…ë ¥ ì‹œë§ˆë‹¤ debounceë¥¼ ì£¼ëŠ” ê²ƒì´ ì¢‹ì„ì§€ ê²€í† 
- ë” ë‹¤ì–‘í•œ ìë™ì™„ì„± íŒ¨í„´ ì§€ì›

ì´ë²ˆ ê°œë°œì„ í†µí•´ ë‹¨ìˆœí•œ ê¸°ëŠ¥ êµ¬í˜„ì„ ë„˜ì–´ì„œ ì¬ì‚¬ìš© ê°€ëŠ¥í•˜ê³  ì‚¬ìš©ì ì¹œí™”ì ì¸ ì»´í¬ë„ŒíŠ¸ë¥¼ ë§Œë“œëŠ” ê²ƒì˜ ì¤‘ìš”ì„±ì„ ë‹¤ì‹œ í•œë²ˆ ê¹¨ë‹¬ì•˜ì–´ìš”.

**Reference**
- [Element.scrollIntoView() - MDN](https://developer.mozilla.org/en-US/docs/Web/API/Element/scrollIntoView)
- [Vue.js nextTick - Vue.js ê³µì‹ ë¬¸ì„œ](https://vuejs.org/api/general.html#nexttick)
- [Event.preventDefault() - MDN](https://developer.mozilla.org/en-US/docs/Web/API/Event/preventDefault)

<Callout status='success'>
[ë§í¬ë“œì¸](https://www.linkedin.com/in/%ED%98%84%EC%9A%B0-%EC%B5%9C-71b487282/)ìœ¼ë¡œ ì´ì•¼ê¸°ë¥¼ ì£¼ê³ ë°›ê³  ì‹¶ìœ¼ì‹œë‹¤ë©´ ì–¸ì œë“ ì§€ í¸í•˜ê²Œ ì—°ë½ì£¼ì„¸ìš”. ğŸ™‡â€â™‚ï¸
</Callout>